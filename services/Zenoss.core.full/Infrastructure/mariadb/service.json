{
    "Description": "MariaDB database server",
    "Command": "/usr/bin/mysqld_safe",
    "Endpoints": [
        {
            "Name": "mariadb",
            "Application": "zodb_mariadb",
            "PortNumber": 3306,
            "Protocol": "tcp",
            "Purpose": "export"
        }
    ],
    "ImageID": "zenoss/zenoss5x",
    "Instances": {
        "min": 1
    },
    "RAMCommitment": "1G",
    "CPUCommitment": 2,
    "Launch": "auto",
    "LogConfigs": [
        {
            "path": "/var/log/mysqld.log",
            "type": "mariadb"
        }
    ],
    "Name": "mariadb",
    "Commands": {
        "rebuild_zodb_session": {
            "Command": "${ZENHOME:-/opt/zenoss}/bin/zenrun mysql.sh rebuild_zodb_session",
            "CommitOnSuccess": false
        }
    },
    "Snapshot": {
        "Pause": "PAUSE_CHECK_TIMEOUT=60 LOCK_HOLD_DURATION=600 ${ZENHOME:-/opt/zenoss}/bin/quiesce-mariadb.sh pause",
        "Resume": "${ZENHOME:-/opt/zenoss}/bin/quiesce-mariadb.sh resume"
    },
    "Tags": [
        "daemon"
    ],
    "Volumes": [
        {
            "#####":         "drwxr-xr-x 12 mysql mysql 4096 Feb 25 21:27 /var/lib/mysql/",
            "Owner":         "mysql:mysql",
            "Permission":    "0755",
            "ResourcePath":  "mariadb",
            "ContainerPath": "/var/lib/mysql"
        }
    ],
    "HealthChecks": {
        "answering": {
            "Script": "mysql --protocol TCP -u{{(getContext . \"global.conf.zodb-admin-user\")}} -h{{(getContext . \"global.conf.zodb-host\")}} -P{{(getContext . \"global.conf.zodb-port\")}} -p{{getContext . \"global.conf.zodb-admin-password\"}} -e 'select 1' > /dev/null",
            "Interval": 5.0
        }
    },
    "PIDFile": "exec echo /var/lib/mysql/$(hostname).pid"
}
